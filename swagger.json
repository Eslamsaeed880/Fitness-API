{
  "openapi": "3.0.0",
  "info": {
    "title": "Fitness API",
    "description": "Comprehensive API documentation for the Fitness platform, covering authentication, user management, workouts, workout sessions, posts, comments, likes, and user following relationships.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "Development Server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "password": { "type": "string" },
          "phone": { "type": "string" },
          "gender": { "type": "string", "enum": ["male", "female"] },
          "Nationality": { "type": "string" },
          "birthDay": { "type": "string", "format": "date" },
          "authProvider": { "type": "string", "enum": ["local", "google"] },
          "role": { "type": "string", "enum": ["user", "admin"] },
          "resetToken": { "type": "string" },
          "resetTokenExpiry": { "type": "string", "format": "date-time" }
        }
      },
      "Exercise": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "muscleGroup": { "type": "string", "enum": ["chest", "back", "shoulders", "arms", "core", "legs", "neck"] },
          "videoUrl": { "type": "string" },
          "createdBy": { "type": "string" }
        }
      },
      "Workout": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "notes": { "type": "string" },
          "createdBy": { "type": "string" },
          "exercises": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "exerciseId": { "type": "string" },
                "notes": { "type": "string" },
                "sets": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "setType": { "type": "string", "enum": ["warmup", "working", "drop", "failure"] },
                      "setNumber": { "type": "integer" },
                      "weightKg": { "type": "number" },
                      "reps": { "type": "integer" },
                      "restSeconds": { "type": "integer" }
                    }
                  }
                }
              }
            }
          },
          "isActive": { "type": "boolean" }
        }
      },
      "WorkoutSession": {
        "type": "object",
        "properties": {
          "workoutData": { "type": "object" },
          "originalWorkoutId": { "type": "string" },
          "createdBy": { "type": "string" },
          "sessionStatus": { "type": "string", "enum": ["active", "completed", "paused", "cancelled"] },
          "startTime": { "type": "string", "format": "date-time" },
          "endTime": { "type": "string", "format": "date-time" },
          "duration": { "type": "integer" }
        }
      },
      "Post": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "content": { "type": "string" },
          "userId": { "type": "string" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "Comment": {
        "type": "object",
        "properties": {
          "comment": { "type": "string" },
          "userId": { "type": "string" },
          "postId": { "type": "string" }
        }
      },
      "Like": {
        "type": "object",
        "properties": {
          "userId": { "type": "string" },
          "postId": { "type": "string" }
        }
      },
      "Follow": {
        "type": "object",
        "properties": {
          "followerId": { "type": "string" },
          "followingId": { "type": "string" }
        }
      }
    }
  },
  "security": [
    { "bearerAuth": [] }
  ],
  "paths": {
    "/workout-session/personal-records": {
      "get": {
        "tags": ["WorkoutSession"],
        "summary": "Get personal records for the logged-in user",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": { "description": "List of personal records" }
        }
      }
    },
    "/workout-session/{id}": {
      "get": {
        "tags": ["WorkoutSession"],
        "summary": "Get workout session by ID",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": {
          "200": {
            "description": "Workout session detail",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WorkoutSession" }
              }
            }
          },
          "404": { "description": "Not found" }
        }
      },
      "put": {
        "tags": ["WorkoutSession"],
        "summary": "Update workout session",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/WorkoutSession" } } }
        },
        "responses": { "200": { "description": "Session updated" } }
      },
      "patch": {
        "tags": ["WorkoutSession"],
        "summary": "Update status of a workout session",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "sessionStatus": { "type": "string", "enum": ["active", "completed", "paused", "cancelled"] }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Session status updated" } }
      }
    },
    "/admin/posts": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get all posts (admin)",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": { "description": "List of posts" }
        }
      }
    },
    "/admin/posts/user/{userId}": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get posts by user (admin)",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "userId", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": { "200": { "description": "List of posts for user" } }
      }
    },
    "/admin/posts/{id}": {
      "delete": {
        "tags": ["Admin"],
        "summary": "Delete post (admin)",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": { "200": { "description": "Post deleted" } }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "email": { "type": "string" },
                  "password": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful login",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "token": { "type": "string" },
                    "userId": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": { "description": "Invalid credentials" }
        }
      }
    },
    "/auth/signup": {
      "post": {
        "tags": ["Auth"],
        "summary": "Register a new user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "email": { "type": "string" },
                  "password": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "User created" }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "tags": ["Auth"],
        "summary": "Request password reset",
        "description": "Sends a password reset email to the user if the email exists in the system.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email", "description": "Registered user email address." }
                },
                "required": ["email"]
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Password reset email sent successfully." },
          "404": { "description": "No user found with this email address." }
        }
      }
    },
    "/auth/confirm-reset-password": {
      "post": {
        "tags": ["Auth"],
        "summary": "Confirm password reset",
        "description": "Resets the user's password using a valid reset token sent to their email.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": { "type": "string", "description": "New password (min 6 characters)." }
                },
                "required": ["password"]
              }
            }
          }
        },
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": true,
            "schema": { "type": "string" },
            "description": "Password reset token sent to user's email."
          }
        ],
        "responses": {
          "200": { "description": "Password reset successful." },
          "400": { "description": "Invalid or expired token." }
        }
      }
    },
    "/auth/google": {
      "post": {
        "tags": ["Auth"],
        "summary": "Start Google OAuth login",
        "description": "Initiates Google OAuth authentication. Redirects user to Google login page.",
        "responses": {
          "302": { "description": "Redirect to Google login page." }
        }
      }
    },
    "/auth/google/callback": {
      "get": {
        "tags": ["Auth"],
        "summary": "Google OAuth callback",
        "description": "Handles Google OAuth callback and returns JWT token if authentication is successful.",
        "responses": {
          "200": {
            "description": "Google authentication successful.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "token": { "type": "string" },
                    "userId": { "type": "string" }
                  }
                }
              }
            }
          },
          "401": { "description": "Google authentication failed." }
        }
      }
    },
    "/admin/users": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get all users",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/User" }
                }
              }
            }
          }
        }
      }
    },
    "/admin/users/{id}": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get user by ID",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": {
          "200": { "description": "User info", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } } },
          "404": { "description": "User not found" }
        }
      },
      "patch": {
        "tags": ["Admin"],
        "summary": "Update user role",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "properties": { "role": { "type": "string", "enum": ["user", "admin"] } } }
            }
          }
        },
        "responses": {
          "200": { "description": "User role updated" }
        }
      },
      "delete": {
        "tags": ["Admin"],
        "summary": "Delete user",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": {
          "204": { "description": "User deleted" }
        }
      }
    },
    "/admin/exercises": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get all exercises",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of exercises",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Exercise" }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Admin"],
        "summary": "Create exercise",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/Exercise" }
            }
          }
        },
        "responses": {
          "201": { "description": "Exercise created" }
        }
      }
    },
    "/admin/exercises/{id}": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get exercise by ID",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": {
          "200": { "description": "Exercise info", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Exercise" } } } },
          "404": { "description": "Exercise not found" }
        }
      },
      "put": {
        "tags": ["Admin"],
        "summary": "Update exercise",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/Exercise" }
            }
          }
        },
        "responses": {
          "200": { "description": "Exercise updated" }
        }
      },
      "delete": {
        "tags": ["Admin"],
        "summary": "Delete exercise",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": {
          "204": { "description": "Exercise deleted" }
        }
      }
    },
    "/workout": {
      "get": {
        "tags": ["Workout"],
        "summary": "Get all workouts for current user",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of workouts",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Workout" } }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Workout"],
        "summary": "Create a new workout",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Workout" } } }
        },
        "responses": { "201": { "description": "Workout created" } }
      }
    },
    "/workout/{id}": {
      "get": {
        "tags": ["Workout"],
        "summary": "Get workout by ID",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "responses": {
          "200": { "description": "Workout detail", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Workout" } } } },
          "404": { "description": "Not found" }
        }
      },
      "put": {
        "tags": ["Workout"],
        "summary": "Update workout",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Workout" } } } },
        "responses": { "200": { "description": "Workout updated" } }
      },
      "delete": {
        "tags": ["Workout"],
        "summary": "Delete workout",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "responses": { "204": { "description": "Workout deleted" } }
      }
    },
    "/workout-session": {
      "get": {
        "tags": ["WorkoutSession"],
        "summary": "Get workout sessions for current user",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Workout sessions",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/WorkoutSession" } } } }
          }
        }
      },
      "post": {
        "tags": ["WorkoutSession"],
        "summary": "Create workout session",
        "security": [{ "bearerAuth": [] }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "properties": { "workoutId": { "type": "string" } } } } } },
        "responses": { "201": { "description": "Session created" } }
      }
    },
    "/posts": {
      "get": {
        "tags": ["Post"],
        "summary": "Get all posts",
        "responses": {
          "200": {
            "description": "List of posts",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Post" } } } }
          }
        }
      },
      "post": {
        "tags": ["Post"],
        "summary": "Create post",
        "security": [{ "bearerAuth": [] }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "properties": { "title": { "type": "string" }, "content": { "type": "string" } } } } } },
        "responses": { "201": { "description": "Post created" } }
      }
    },
    "/posts/{id}": {
      "get": {
        "tags": ["Post"],
        "summary": "Get post by ID",
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "responses": { "200": { "description": "Post detail", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Post" } } } }, "404": { "description": "Not found" } }
      },
      "put": {
        "tags": ["Post"],
        "summary": "Update post",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "properties": { "title": { "type": "string" }, "content": { "type": "string" } } } } } },
        "responses": { "200": { "description": "Post updated" } }
      },
      "delete": {
        "tags": ["Post"],
        "summary": "Delete post",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "responses": { "204": { "description": "Post deleted" } }
      }
    },
    "/posts/{id}/like": {
      "post": {
        "tags": ["Post"],
        "summary": "Like a post",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "responses": { "200": { "description": "Post liked" } }
      },
      "delete": {
        "tags": ["Post"],
        "summary": "Unlike a post",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "responses": { "200": { "description": "Post unliked" } }
      }
    },
    "/posts/{id}/comment": {
      "post": {
        "tags": ["Post"],
        "summary": "Comment on a post",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "schema": { "type": "string" }, "required": true }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "properties": { "comment": { "type": "string" } } } } } },
        "responses": { "201": { "description": "Comment added" } }
      }
    },
    "/posts/{postId}/comment/{commentId}": {
      "delete": {
        "tags": ["Post"],
        "summary": "Delete a comment on a post",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "postId", "in": "path", "schema": { "type": "string" }, "required": true },
          { "name": "commentId", "in": "path", "schema": { "type": "string" }, "required": true }
        ],
        "responses": { "200": { "description": "Comment deleted" } }
      }
    },
    "/following-details/follow": {
      "post": {
        "tags": ["Follow"],
        "summary": "Follow a user",
        "security": [{ "bearerAuth": [] }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "properties": { "followingId": { "type": "string" } } } } } },
        "responses": { "201": { "description": "Follow created" } }
      }
    },
    "/following-details/unfollow": {
      "delete": {
        "tags": ["Follow"],
        "summary": "Unfollow a user",
        "security": [{ "bearerAuth": [] }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "properties": { "followingId": { "type": "string" } } } } } },
        "responses": { "200": { "description": "Unfollowed successfully" } }
      }
    },
    "/following-details/followers": {
      "get": {
        "tags": ["Follow"],
        "summary": "Get followers of current user",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "Followers list" } }
      }
    },
    "/following-details/following": {
      "get": {
        "tags": ["Follow"],
        "summary": "Get users followed by current user",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "Following list" } }
      }
    }
  }
}